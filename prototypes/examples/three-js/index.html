<!doctype html>
<html lang="en">

<head>
    <style>
        input {
            margin: 0.25rem;
        }

        div {
            margin: 0.5rem;
        }
    </style>

    <script src='./bundlepreload.js'></script>

    <script type="bundlepreload">
    {
        "source": "http://localhost:8080/src.wbn"
    }
</script>
</head>

<body>
    <script>
        function run_app() {
            let t = window.performance.now();
            import('./wbn_app.js').then(module => {
                let elapsed = window.performance.now() - t;
                document.getElementById('message').innerText =
                    "app import() from bundle took " + elapsed + ' ms';
                module.run(document.getElementById('container'));
            });
        }
    </script>

    <div>
        <input type="button" onclick="run_app()" value="run_app">
    </div>
    <div id="message"></div>
    <div id="container"></div>

</body>

</html>
import{Geometry}from'../core/Geometry.js';import{Float32BufferAttribute}from'../core/BufferAttribute.js';import{BufferGeometry}from'../core/BufferGeometry.js';import{Vector3}from'../math/Vector3.js';import{Vector2}from'../math/Vector2.js';import{_Math}from'../math/Math.js';function LatheGeometry(a,b,c,d){Geometry.call(this),this.type='LatheGeometry',this.parameters={points:a,segments:b,phiStart:c,phiLength:d},this.fromBufferGeometry(new LatheBufferGeometry(a,b,c,d)),this.mergeVertices()}LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry;function LatheBufferGeometry(e,f,g,h){var k=Math.PI;BufferGeometry.call(this),this.type='LatheBufferGeometry',this.parameters={points:e,segments:f,phiStart:g,phiLength:h},f=Math.floor(f)||12,g=g||0,h=h||2*k,h=_Math.clamp(h,0,2*k);var l,m,i,j=[],o=[],p=[],q=1/f,r=new Vector3,s=new Vector2;for(m=0;m<=f;m++){var t=g+m*q*h,u=Math.sin(t),v=Math.cos(t);for(i=0;i<=e.length-1;i++)r.x=e[i].x*u,r.y=e[i].y,r.z=e[i].x*v,o.push(r.x,r.y,r.z),s.x=m/f,s.y=i/(e.length-1),p.push(s.x,s.y)}for(m=0;m<f;m++)for(i=0;i<e.length-1;i++){l=i+m*e.length;var w=l,a=l+e.length,b=l+e.length+1,c=l+1;j.push(w,a,c),j.push(a,b,c)}if(this.setIndex(j),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('uv',new Float32BufferAttribute(p,2)),this.computeVertexNormals(),h===2*k){var d=this.attributes.normal.array,x=new Vector3,y=new Vector3,z=new Vector3;for(l=3*(f*e.length),m=0,i=0;m<e.length;m++,i+=3)x.x=d[i+0],x.y=d[i+1],x.z=d[i+2],y.x=d[l+i+0],y.y=d[l+i+1],y.z=d[l+i+2],z.addVectors(x,y).normalize(),d[i+0]=d[l+i+0]=z.x,d[i+1]=d[l+i+1]=z.y,d[i+2]=d[l+i+2]=z.z}}LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry;export{LatheGeometry,LatheBufferGeometry};
import{Vector3}from'../math/Vector3.js';import{Object3D}from'../core/Object3D.js';function LOD(){Object3D.call(this),this.type='LOD',Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,copy:function(a){Object3D.prototype.copy.call(this,a,!1);for(var b,c=a.levels,d=0,e=c.length;d<e;d++)b=c[d],this.addLevel(b.object.clone(),b.distance);return this},addLevel:function(a,b){b===void 0&&(b=0),b=Math.abs(b);for(var c=this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a}),this.add(a)},getObjectForDistance:function(a){for(var b=this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return b[c-1].object},raycast:function(){var a=new Vector3;return function(b,c){a.setFromMatrixPosition(this.matrixWorld);var d=b.ray.origin.distanceTo(a);this.getObjectForDistance(d).raycast(b,c)}}(),update:function(){var a=new Vector3,b=new Vector3;return function(c){var d=this.levels;if(1<d.length){a.setFromMatrixPosition(c.matrixWorld),b.setFromMatrixPosition(this.matrixWorld);var e=a.distanceTo(b);d[0].object.visible=!0;for(var f=1,g=d.length;f<g&&e>=d[f].distance;f++)d[f-1].object.visible=!1,d[f].object.visible=!0;for(;f<g;f++)d[f].object.visible=!1}}}(),toJSON:function(a){var b=Object3D.prototype.toJSON.call(this,a);b.object.levels=[];for(var c,d=this.levels,e=0,f=d.length;e<f;e++)c=d[e],b.object.levels.push({object:c.object.uuid,distance:c.distance});return b}});export{LOD};
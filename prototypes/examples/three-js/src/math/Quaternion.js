import{Vector3}from'./Vector3.js';function Quaternion(a,b,c,d){this._x=a||0,this._y=b||0,this._z=c||0,this._w=d===void 0?1:d}Object.assign(Quaternion,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,g,h){var i=Math.sin,j=Math.sqrt,k=c[d+0],l=c[d+1],m=c[d+2],n=c[d+3],o=e[g+0],p=e[g+1],q=e[g+2],r=e[g+3];if(n!==r||k!==o||l!==p||m!==q){var t=1-h,s=k*o+l*p+m*q+n*r,u=0<=s?1:-1,v=1-s*s;if(v>Number.EPSILON){var w=j(v),x=Math.atan2(w,s*u);t=i(t*x)/w,h=i(h*x)/w}var y=h*u;if(k=k*t+o*y,l=l*t+p*y,m=m*t+q*y,n=n*t+r*y,t==1-h){var z=1/j(k*k+l*l+m*m+n*n);k*=z,l*=z,m*=z,n*=z}}a[b]=k,a[b+1]=l,a[b+2]=m,a[b+3]=n}}),Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a,this.onChangeCallback()}}}),Object.assign(Quaternion.prototype,{set:function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._w=d,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,b){if(!1===(a&&a.isEuler))throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');var c=a._x,d=a._y,e=a._z,f=a.order,g=Math.cos,h=Math.sin,i=g(c/2),j=g(d/2),k=g(e/2),l=h(c/2),m=h(d/2),n=h(e/2);return'XYZ'===f?(this._x=l*j*k+i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k-l*m*n):'YXZ'===f?(this._x=l*j*k+i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k+l*m*n):'ZXY'===f?(this._x=l*j*k-i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k-l*m*n):'ZYX'===f?(this._x=l*j*k-i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k+l*m*n):'YZX'===f?(this._x=l*j*k+i*m*n,this._y=i*m*k+l*j*n,this._z=i*j*n-l*m*k,this._w=i*j*k-l*m*n):'XZY'===f&&(this._x=l*j*k-i*m*n,this._y=i*m*k-l*j*n,this._z=i*j*n+l*m*k,this._w=i*j*k+l*m*n),!1!==b&&this.onChangeCallback(),this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var b,c=Math.sqrt,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[1],i=d[5],j=d[9],k=d[2],l=d[6],m=d[10],n=e+i+m;return 0<n?(b=0.5/c(n+1),this._w=0.25/b,this._x=(l-j)*b,this._y=(g-k)*b,this._z=(h-f)*b):e>i&&e>m?(b=2*c(1+e-i-m),this._w=(l-j)/b,this._x=0.25*b,this._y=(f+h)/b,this._z=(g+k)/b):i>m?(b=2*c(1+i-e-m),this._w=(g-k)/b,this._x=(f+h)/b,this._y=0.25*b,this._z=(j+l)/b):(b=2*c(1+m-e-i),this._w=(h-f)/b,this._x=(g+k)/b,this._y=(j+l)/b,this._z=0.25*b),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,b=Math.abs,c=new Vector3;return function(d,e){return void 0===c&&(c=new Vector3),a=d.dot(e)+1,a<1e-6?(a=0,b(d.x)>b(d.z)?c.set(-d.y,d.x,0):c.set(0,-d.z,d.y)):c.crossVectors(d,e),this._x=c.x,this._y=c.y,this._z=c.z,this._w=a,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a),this.onChangeCallback(),this},multiply:function(a,b){return void 0===b?this.multiplyQuaternions(this,a):(console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.'),this.multiplyQuaternions(a,b))},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(c,a){var b=c._x,d=c._y,e=c._z,f=c._w,g=a._x,h=a._y,i=a._z,j=a._w;return this._x=b*j+f*g+d*i-e*h,this._y=d*j+f*h+e*g-b*i,this._z=e*j+f*i+b*h-d*g,this._w=f*j-b*g-d*h-e*i,this.onChangeCallback(),this},slerp:function(a,b){var c=Math.sin;if(0===b)return this;if(1===b)return this.copy(a);var d=this._x,e=this._y,f=this._z,g=this._w,h=g*a._w+d*a._x+e*a._y+f*a._z;if(0>h?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,h=-h):this.copy(a),1<=h)return this._w=g,this._x=d,this._y=e,this._z=f,this;var i=Math.sqrt(1-h*h);if(1e-3>Math.abs(i))return this._w=0.5*(g+this._w),this._x=0.5*(d+this._x),this._y=0.5*(e+this._y),this._z=0.5*(f+this._z),this;var j=Math.atan2(i,h),k=c((1-b)*j)/i,l=c(b*j)/i;return this._w=g*k+this._w*l,this._x=d*k+this._x*l,this._y=e*k+this._y*l,this._z=f*k+this._z*l,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){return void 0===b&&(b=0),this._x=a[b],this._y=a[b+1],this._z=a[b+2],this._w=a[b+3],this.onChangeCallback(),this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}});export{Quaternion};
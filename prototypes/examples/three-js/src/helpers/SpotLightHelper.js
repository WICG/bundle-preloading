import{Vector3}from'../math/Vector3.js';import{Object3D}from'../core/Object3D.js';import{LineSegments}from'../objects/LineSegments.js';import{LineBasicMaterial}from'../materials/LineBasicMaterial.js';import{Float32BufferAttribute}from'../core/BufferAttribute.js';import{BufferGeometry}from'../core/BufferGeometry.js';function SpotLightHelper(a){var b=Math.sin,c=Math.cos,d=Math.PI;Object3D.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new BufferGeometry,f=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],g=0,h=1,i=32;g<i;g++,h++){var j=2*(g/i*d),k=2*(h/i*d);f.push(c(j),b(j),1,c(k),b(k),1)}e.addAttribute('position',new Float32BufferAttribute(f,3));var l=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(e,l),this.add(this.cone),this.update()}SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){var a=new Vector3,b=new Vector3;return function(){var c=this.light.distance?this.light.distance:1e3,d=c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c),a.setFromMatrixPosition(this.light.matrixWorld),b.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(b.sub(a)),this.cone.material.color.copy(this.light.color)}}();export{SpotLightHelper};
var ShapeUtils={area:function(b){for(var c=b.length,d=0,a=c-1,e=0;e<c;a=e++)d+=b[a].x*b[e].y-b[e].x*b[a].y;return 0.5*d},triangulate:function(){function d(b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p;if(i=b[g[c]].x,j=b[g[c]].y,k=b[g[d]].x,l=b[g[d]].y,m=b[g[e]].x,n=b[g[e]].y,0>=(k-i)*(n-j)-(l-j)*(m-i))return!1;var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;for(q=m-k,r=n-l,s=i-m,t=j-n,u=k-i,v=l-j,h=0;h<f;h++)if(o=b[g[h]].x,p=b[g[h]].y,(o!==i||p!==j)&&(o!==k||p!==l)&&(o!==m||p!==n)&&(w=o-i,x=p-j,y=o-k,z=p-l,A=o-m,B=p-n,E=q*z-r*y,C=u*x-v*w,D=s*B-t*A,E>=-a&&D>=-a&&C>=-a))return!1;return!0}var a=Number.EPSILON;return function(e,f){var g=e.length;if(3>g)return null;var h,i,j,k=[],l=[],m=[];if(0<ShapeUtils.area(e))for(i=0;i<g;i++)l[i]=i;else for(i=0;i<g;i++)l[i]=g-1-i;var n=g,o=2*n;for(i=n-1;2<n;){if(0>=o--)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),f?m:k;if(h=i,n<=h&&(h=0),i=h+1,n<=i&&(i=0),j=i+1,n<=j&&(j=0),d(e,h,i,j,n,l)){var p,a,b,c,q;for(p=l[h],a=l[i],b=l[j],k.push([e[p],e[a],e[b]]),m.push([l[h],l[i],l[j]]),(c=i,q=i+1);q<n;c++,q++)l[c]=l[q];n--,o=2*n}}return f?m:k}}(),triangulateShape:function(a,b){function c(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function d(a,b,c){return a.x===b.x?a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y:a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x}function e(a,b,c,e,f){var g=b.x-a.x,h=b.y-a.y,i=e.x-c.x,l=e.y-c.y,m=a.x-c.x,n=a.y-c.y,o=h*i-g*l,p=h*m-g*n;if(j(o)>k){var q;if(0<o){if(0>p||p>o)return[];if(q=l*m-i*n,0>q||q>o)return[]}else{if(0<p||p<o)return[];if(q=l*m-i*n,0<q||q<o)return[]}if(0===q)return f&&(0==p||p==o)?[]:[a];if(q===o)return f&&(0==p||p==o)?[]:[b];if(0==p)return[c];if(p==o)return[e];var r=q/o;return[{x:a.x+r*g,y:a.y+r*h}]}if(0!=p||l*m!=i*n)return[];var s=0==g&&0==h,t=0==i&&0==l;if(s&&t)return a.x!==c.x||a.y!==c.y?[]:[a];if(s)return d(c,e,a)?[a]:[];if(t)return d(a,b,c)?[c]:[];var u,v,w,x,y,z,A,B;return 0==g?(a.y<b.y?(u=a,w=a.y,v=b,x=b.y):(u=b,w=b.y,v=a,x=a.y),c.y<e.y?(y=c,A=c.y,z=e,B=e.y):(y=e,A=e.y,z=c,B=c.y)):(a.x<b.x?(u=a,w=a.x,v=b,x=b.x):(u=b,w=b.x,v=a,x=a.x),c.x<e.x?(y=c,A=c.x,z=e,B=e.x):(y=e,A=e.x,z=c,B=c.x)),w<=A?x<A?[]:x===A?f?[]:[y]:x<=B?[y,v]:[y,z]:w>B?[]:w===B?f?[]:[u]:x<=B?[u,v]:[u,z]}function g(a,b,c,d){var e=b.x-a.x,f=b.y-a.y,g=c.x-a.x,h=c.y-a.y,i=d.x-a.x,l=d.y-a.y,m=e*h-f*g,n=e*l-f*i;if(j(m)>k){var o=i*h-l*g;return 0<m?0<=n&&0<=o:0<=n||0<=o}return 0<n}var j=Math.abs,k=Number.EPSILON;c(a),b.forEach(c);for(var l,i,m,f,n,o,p={},q=a.concat(),r=0,h=b.length;r<h;r++)Array.prototype.push.apply(q,b[r]);for(l=0,i=q.length;l<i;l++)n=q[l].x+":"+q[l].y,void 0!==p[n]&&console.warn("THREE.ShapeUtils: Duplicate point",n,l),p[n]=l;var s=function(a,b){function c(a,b){var c=t.length-1,d=a-1;0>d&&(d=c);var e=a+1;e>c&&(e=0);var f=g(t[a],t[d],t[e],i[b]);if(!f)return!1;var h=i.length-1,j=b-1;0>j&&(j=h);var k=b+1;return k>h&&(k=0),f=g(i[b],i[j],i[k],t[a]),!!f}function d(a,b){var c,d,f;for(c=0;c<t.length;c++)if(d=c+1,d%=t.length,f=e(a,b,t[c],t[d],!0),0<f.length)return!0;return!1}function f(a,c){var d,f,g,h,i;for(d=0;d<u.length;d++)for(f=b[u[d]],g=0;g<f.length;g++)if(h=g+1,h%=f.length,i=e(a,c,f[g],f[h],!0),0<i.length)return!0;return!1}for(var i,j,k,l,m,n,o,p,q,r,s,t=a.concat(),u=[],v=[],w=0,h=b.length;w<h;w++)u.push(w);for(var x=0,y=2*u.length;0<u.length;){if(y--,0>y){console.log("Infinite Loop! Holes left:"+u.length+", Probably Hole outside Shape!");break}for(k=x;k<t.length;k++){l=t[k],j=-1;for(var w=0;w<u.length;w++)if(n=u[w],o=l.x+":"+l.y+":"+n,void 0===v[o]){i=b[n];for(var z=0;z<i.length;z++)if(m=i[z],c(k,z)&&!d(l,m)&&!f(l,m)){j=z,u.splice(w,1),p=t.slice(0,k+1),q=t.slice(k),r=i.slice(j),s=i.slice(0,j+1),t=p.concat(r).concat(s).concat(q),x=k;break}if(0<=j)break;v[o]=!0}if(0<=j)break}}return t}(a,b),t=ShapeUtils.triangulate(s,!1);for(l=0,i=t.length;l<i;l++)for(f=t[l],m=0;3>m;m++)n=f[m].x+":"+f[m].y,o=p[n],void 0!==o&&(f[m]=o);return t.concat()},isClockWise:function(a){return 0>ShapeUtils.area(a)}};export{ShapeUtils};
import{Sphere}from'../math/Sphere.js';import{Ray}from'../math/Ray.js';import{Matrix4}from'../math/Matrix4.js';import{Object3D}from'../core/Object3D.js';import{Vector3}from'../math/Vector3.js';import{LineBasicMaterial}from'../materials/LineBasicMaterial.js';import{BufferGeometry}from'../core/BufferGeometry.js';import{LineSegments}from'./LineSegments.js';function Line(a,b,c){return 1===c?(console.warn('THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.'),new LineSegments(a,b)):void(Object3D.call(this),this.type='Line',this.geometry=a===void 0?new BufferGeometry:a,this.material=b===void 0?new LineBasicMaterial({color:16777215*Math.random()}):b)}Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,raycast:function(){var c=new Matrix4,d=new Ray,e=new Sphere;return function(f,g){var h=f.linePrecision,j=h*h,k=this.geometry,m=this.matrixWorld;if(null===k.boundingSphere&&k.computeBoundingSphere(),e.copy(k.boundingSphere),e.applyMatrix4(m),!1!==f.ray.intersectsSphere(e)){c.getInverse(m),d.copy(f.ray).applyMatrix4(c);var n=new Vector3,o=new Vector3,p=new Vector3,q=new Vector3,r=this&&this.isLineSegments?2:1;if(k.isBufferGeometry){var s=k.index,t=k.attributes,u=t.position.array;if(null!==s)for(var v=s.array,w=0,x=v.length-1;w<x;w+=r){var l=v[w],a=v[w+1];n.fromArray(u,3*l),o.fromArray(u,3*a);var b=d.distanceSqToSegment(n,o,q,p);if(!(b>j)){q.applyMatrix4(this.matrixWorld);var y=f.ray.origin.distanceTo(q);y<f.near||y>f.far||g.push({distance:y,point:p.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else for(var w=0,x=u.length/3-1;w<x;w+=r){n.fromArray(u,3*w),o.fromArray(u,3*w+3);var b=d.distanceSqToSegment(n,o,q,p);if(!(b>j)){q.applyMatrix4(this.matrixWorld);var y=f.ray.origin.distanceTo(q);y<f.near||y>f.far||g.push({distance:y,point:p.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}else if(k.isGeometry)for(var b,z=k.vertices,A=z.length,w=0;w<A-1;w+=r)if(b=d.distanceSqToSegment(z[w],z[w+1],q,p),!(b>j)){q.applyMatrix4(this.matrixWorld);var y=f.ray.origin.distanceTo(q);y<f.near||y>f.far||g.push({distance:y,point:p.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});export{Line};
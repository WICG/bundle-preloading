import{Matrix3}from'../math/Matrix3.js';import{Vector3}from'../math/Vector3.js';import{LineSegments}from'../objects/LineSegments.js';import{LineBasicMaterial}from'../materials/LineBasicMaterial.js';import{Float32BufferAttribute}from'../core/BufferAttribute.js';import{BufferGeometry}from'../core/BufferGeometry.js';function VertexNormalsHelper(a,b,c,d){this.object=a,this.size=b===void 0?1:b;var e=c===void 0?16711680:c,f=d===void 0?1:d,g=0,h=this.object.geometry;h&&h.isGeometry?g=3*h.faces.length:h&&h.isBufferGeometry&&(g=h.attributes.normal.count);var i=new BufferGeometry,j=new Float32BufferAttribute(3*(2*g),3);i.addAttribute('position',j),LineSegments.call(this,i,new LineBasicMaterial({color:e,linewidth:f})),this.matrixAutoUpdate=!1,this.update()}VertexNormalsHelper.prototype=Object.create(LineSegments.prototype),VertexNormalsHelper.prototype.constructor=VertexNormalsHelper,VertexNormalsHelper.prototype.update=function(){var a=new Vector3,b=new Vector3,c=new Matrix3;return function(){var d=['a','b','c'];this.object.updateMatrixWorld(!0),c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h,k=g.vertices,m=g.faces,n=0,o=0,i=m.length;o<i;o++){h=m[o];for(var l=0,j=h.vertexNormals.length;l<j;l++){var p=k[h[d[l]]],q=h.vertexNormals[l];a.copy(p).applyMatrix4(e),b.copy(q).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(n,a.x,a.y,a.z),++n,f.setXYZ(n,b.x,b.y,b.z),++n}}else if(g&&g.isBufferGeometry)for(var r=g.attributes.position,s=g.attributes.normal,n=0,l=0,j=r.count;l<j;l++)a.set(r.getX(l),r.getY(l),r.getZ(l)).applyMatrix4(e),b.set(s.getX(l),s.getY(l),s.getZ(l)),b.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),f.setXYZ(n,a.x,a.y,a.z),++n,f.setXYZ(n,b.x,b.y,b.z),++n;f.needsUpdate=!0}}();export{VertexNormalsHelper};
import{Geometry}from'../core/Geometry.js';import{BufferGeometry}from'../core/BufferGeometry.js';import{Float32BufferAttribute}from'../core/BufferAttribute.js';import{ShapeUtils}from'../extras/ShapeUtils.js';function ShapeGeometry(a,b){Geometry.call(this),this.type='ShapeGeometry','object'==typeof b&&(console.warn('THREE.ShapeGeometry: Options parameter has been removed.'),b=b.curveSegments),this.parameters={shapes:a,curveSegments:b},this.fromBufferGeometry(new ShapeBufferGeometry(a,b)),this.mergeVertices()}ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry;function ShapeBufferGeometry(a,d){function b(h){var k,i,l,m=f.length/3,n=h.extractPoints(d),o=n.shape,p=n.holes;if(!1===ShapeUtils.isClockWise(o))for(o=o.reverse(),k=0,i=p.length;k<i;k++)l=p[k],!0===ShapeUtils.isClockWise(l)&&(p[k]=l.reverse());var q=ShapeUtils.triangulateShape(o,p);for(k=0,i=p.length;k<i;k++)l=p[k],o=o.concat(l);for(k=0,i=o.length;k<i;k++){var r=o[k];f.push(r.x,r.y,0),c.push(0,0,1),g.push(r.x,r.y)}for(k=0,i=q.length;k<i;k++){var s=q[k],t=s[0]+m,a=s[1]+m,b=s[2]+m;e.push(t,a,b),j+=3}}BufferGeometry.call(this),this.type='ShapeBufferGeometry',this.parameters={shapes:a,curveSegments:d},d=d||12;var e=[],f=[],c=[],g=[],h=0,j=0;if(!1===Array.isArray(a))b(a);else for(var k=0;k<a.length;k++)b(a[k]),this.addGroup(h,j,k),h+=j,j=0;this.setIndex(e),this.addAttribute('position',new Float32BufferAttribute(f,3)),this.addAttribute('normal',new Float32BufferAttribute(c,3)),this.addAttribute('uv',new Float32BufferAttribute(g,2))}ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry;export{ShapeGeometry,ShapeBufferGeometry};
import{Matrix4}from'../math/Matrix4.js';import{_Math}from'../math/Math.js';import{PerspectiveCamera}from'./PerspectiveCamera.js';function StereoCamera(){this.type='StereoCamera',this.aspect=1,this.eyeSep=0.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(StereoCamera.prototype,{update:function(){var a,b,c,d,e,f,g,h,i=new Matrix4,j=new Matrix4;return function(k){var l=a!==this||b!==k.focus||c!==k.fov||d!==k.aspect*this.aspect||e!==k.near||f!==k.far||g!==k.zoom||h!==this.eyeSep;if(l){a=this,b=k.focus,c=k.fov,d=k.aspect*this.aspect,e=k.near,f=k.far,g=k.zoom;var m=k.projectionMatrix.clone();h=this.eyeSep/2;var n,o,p=h*e/b,q=e*Math.tan(0.5*(_Math.DEG2RAD*c))/g;j.elements[12]=-h,i.elements[12]=h,n=-q*d+p,o=q*d+p,m.elements[0]=2*e/(o-n),m.elements[8]=(o+n)/(o-n),this.cameraL.projectionMatrix.copy(m),n=-q*d-p,o=q*d-p,m.elements[0]=2*e/(o-n),m.elements[8]=(o+n)/(o-n),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(j),this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(i)}}()});export{StereoCamera};